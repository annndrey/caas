## -*- coding: utf-8 -*-
<%inherit file="caas:templates/template_base.mak"/>

<%def name="navbar(page, maxpage)">
   <ul class="pager">
  % if not page:
    <li class="previous disabled"><a href="${request.route_url('home')}"> &larr; œô¨²œô¨ßœô¨Õœô¨àœô¨Õœô¨Ô</a></li>
    <li class="next"><a href="${request.route_url('home')}/2">œô¨½œô¨Ðœô¨×œô¨Ðœô¨Ô &rarr;</a></li>
  % else:
    <li class="previous"><a href="${request.route_url('home')}/${page}"> &larr; œô¨²œô¨ßœô¨Õœô¨àœô¨Õœô¨Ô</a></li>
    % if int(page) < int(maxpage):
    <li class="next"><a href="${request.route_url('home')}/${page + 2}">œô¨½œô¨Ðœô¨×œô¨Ðœô¨Ô &rarr;</a></li>
    % else:
    <li class="next disabled"><a href="${request.route_url('home')}/${page + 1}">œô¨½œô¨Ðœô¨×œô¨Ðœô¨Ô &rarr;</a></li>
    % endif
  % endif  
</ul>
</%def>

<div class="container">
<div class="page-header">
     <h2>œô¨ºœô¨Ûœô¨ãœô¨Ñœô¨Ýœô¨ëœô¨Õ œô¨Ôœô¨Õœô¨Ûœô¨Ð</h2><small>œô¨Úœô¨ãœô¨Úœô¨ã</small>

</div>     
<nav class="navbar navbar-default navbar-ststic-top" role="navigation">
     <a class="navbar-brand" href="#">œô¨³œô¨Ûœô¨Ðœô¨Óœô¨Ýœô¨Õ</a>
     <div class="container">
     <p class="navbar-text">œô¨Èœô¨Ðœô¨Ûœô¨Þœô¨Ü, ${authuser}! 

     <a data-toggle="tooltip" data-placement="top" title="œô¨²œô¨ëœô¨Ùœô¨âœô¨Ø" href="${request.route_url('logout')}"><span class="glyphicon glyphicon-circle-arrow-right"></span></a>

     <ul class="nav navbar-nav">
        <li><a href="/newcomments">œô¨Ýœô¨Þœô¨Òœô¨ëœô¨Õ œô¨Úœô¨Þœô¨Üœô¨Üœô¨Õœô¨Ýœô¨âœô¨Ðœô¨àœô¨Øœô¨Ø <span class="badge">${str(newcommentscount)}</span></a></li>
        <li><a href="#">œô¨Þœô¨áœô¨âœô¨Ðœô¨Ûœô¨ìœô¨Ýœô¨Þœô¨Õ</a></li>
     </ul>
          </p>
     </div>
</nav>

${navbar(page, max_page)}
     <div class="row">
     	  <form role="form" method="post" action="${req.route_url('newpost')}">
     	  	<div class="form-group">
     		     <div class="col-md-8 col-md-offset-2">
     		     	  <textarea class="form-control" id="userpost" name="userpost" placeholder="œô¨½œô¨Ðœô¨Ü œô¨Þœô¨çœô¨Õœô¨Ýœô¨ì œô¨Òœô¨Ðœô¨Öœô¨Ýœô¨Þ œô¨Òœô¨Ðœô¨èœô¨Õ œô¨Üœô¨Ýœô¨Õœô¨Ýœô¨Øœô¨Õ" rows=2></textarea>
			  <input type="hidden" id="csrf" name="csrf" value="${req.session.get_csrf_token()}" />
			  <button type="submit" class="btn btn-default pull-right" id="submit" name="submit" title="œô¨¿œô¨Þœô¨áœô¨Ûœô¨Ðœô¨âœô¨ì" tabindex="3">œô¨¿œô¨Þœô¨áœô¨Ûœô¨Ðœô¨âœô¨ì</button>
     		     </div>
		</div>
    	  </form>
     </div>  

     % for p in posts:
       <div class="row">
       	    <div class="col-md-8 col-md-offset-2" align='justify'>
	    
     		 <h4>${p.name}: <small>${p.date.strftime('%d/%m/%Y %H:%M')}</small>
		 % if p.name == authuser:
		 	<button class="btn btn-default btn-xs" data-toggle="modal" data-target="#editModal${p.id}" data-toggle="tooltip" data-placement="top" title="œô¨¿œô¨àœô¨Ðœô¨Òœô¨Øœô¨âœô¨ì"><span class="glyphicon glyphicon-pencil"></span></button>
		 % endif
		 <div class="modal fade" id="editModal${p.id}" tabindex="-1" role="dialog" aria-labelledby="editModalLabel"${p.id} aria-hidden="true">
  		 <div class="modal-dialog">
    		 <div class="modal-content">
      		 <div class="modal-header">
        	 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        	 <h4 class="modal-title" id="editModalLabel${p.id}">œô¨¿œô¨àœô¨Ðœô¨Òœô¨Úœô¨Ð œô¨×œô¨Ðœô¨ßœô¨Øœô¨áœô¨Ø</h4>
      		 </div>
      		 <div class="modal-body">
        	 <form role="form" method="post" action="/edit/${p.id}">
		 <textarea class="form-control" id="newpost" name="newpost" rows="4">${p.post|n}</textarea>
		 <input type="hidden" id="csrf" name="csrf" value="${req.session.get_csrf_token()}" />
      		 </div>
      		 <div class="modal-footer">
        	 <button type="button" class="btn btn-default" data-dismiss="modal">œô¨·œô¨Ðœô¨Úœô¨àœô¨ëœô¨âœô¨ì</button>
        	 <button type="submit" class="btn btn-primary">œô¨Áœô¨Þœô¨åœô¨àœô¨Ðœô¨Ýœô¨Øœô¨âœô¨ì</button>
		 </form>
      </div>
    </div>
  </div>
</div>
		 % if p.name == authuser:
		   <button class="btn btn-default btn-xs" data-toggle="modal" data-target=".bs-delete-modal-sm${p.id}"><span class="glyphicon glyphicon-trash"></span></button>
		   <div class="modal fade bs-delete-modal-sm${p.id}" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
		     <div class="modal-dialog">
		       <div class="modal-content">
		       <div class="modal-header">
		       <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		       <h4 class="modal-title" id="deleteModalLabel${p.id}">œô¨Ãœô¨Ôœô¨Ðœô¨Ûœô¨Õœô¨Ýœô¨Øœô¨Õ œô¨×œô¨Ðœô¨ßœô¨Øœô¨áœô¨Ø</h4>
		       </div>
		       <div class="modal-body">
      		       <a href="/remove/${p.id}">œô¨´œô¨Ð, œô¨ãœô¨Ôœô¨Ðœô¨Ûœô¨Øœô¨âœô¨Õ œô¨Ýœô¨Õœô¨Üœô¨Õœô¨Ôœô¨Ûœô¨Õœô¨Ýœô¨Ýœô¨Þ!</a>
		       </div>
		       <div class="modal-footer">
		       <button type="button" class="btn btn-default" data-dismiss="modal">œô¨¾œô¨âœô¨Üœô¨Õœô¨Ýœô¨Øœô¨âœô¨ì</button>
		       </div>
		       </div>
		     </div>
		   </div>

		 % endif  
		 <a role="button" class="btn btn-default btn-xs" data-toggle="tooltip" data-placement="top" title="œô¨¾œô¨âœô¨Òœô¨Õœô¨âœô¨Øœô¨âœô¨ì" href="/reply"><span class="glyphicon glyphicon-comment"></span></a>
		 </h4>
		 </span>${p.post|n}
	    </div>
       </div>
      % endfor
   <ul class="pager">
${navbar(page, max_page)}

</div>